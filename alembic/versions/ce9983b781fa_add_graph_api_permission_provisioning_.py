"""add graph api permissions provisioning stage

Revision ID: ce9983b781fa
Revises: 19ab032d784e
Create Date: 2020-06-23 12:57:11.781788

"""
from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision = "ce9983b781fa"  # pragma: allowlist secret
down_revision = "19ab032d784e"  # pragma: allowlist secret
branch_labels = None
depends_on = None


def upgrade():
    op.alter_column(
        "portfolio_state_machines",
        "state",
        type_=sa.Enum(
            "UNSTARTED",
            "COMPLETED",
            "CONFIGURATION_ERROR",
            "TENANT_CREATED",
            "TENANT_IN_PROGRESS",
            "TENANT_FAILED",
            "BILLING_PROFILE_CREATION_CREATED",
            "BILLING_PROFILE_CREATION_IN_PROGRESS",
            "BILLING_PROFILE_CREATION_FAILED",
            "BILLING_PROFILE_VERIFICATION_CREATED",
            "BILLING_PROFILE_VERIFICATION_IN_PROGRESS",
            "BILLING_PROFILE_VERIFICATION_FAILED",
            "BILLING_PROFILE_TENANT_ACCESS_CREATED",
            "BILLING_PROFILE_TENANT_ACCESS_IN_PROGRESS",
            "BILLING_PROFILE_TENANT_ACCESS_FAILED",
            "TASK_ORDER_BILLING_CREATION_CREATED",
            "TASK_ORDER_BILLING_CREATION_IN_PROGRESS",
            "TASK_ORDER_BILLING_CREATION_FAILED",
            "TASK_ORDER_BILLING_VERIFICATION_CREATED",
            "TASK_ORDER_BILLING_VERIFICATION_IN_PROGRESS",
            "TASK_ORDER_BILLING_VERIFICATION_FAILED",
            "BILLING_INSTRUCTION_CREATED",
            "BILLING_INSTRUCTION_IN_PROGRESS",
            "BILLING_INSTRUCTION_FAILED",
            "PRODUCT_PURCHASE_CREATED",
            "PRODUCT_PURCHASE_IN_PROGRESS",
            "PRODUCT_PURCHASE_FAILED",
            "PRODUCT_PURCHASE_VERIFICATION_CREATED",
            "PRODUCT_PURCHASE_VERIFICATION_IN_PROGRESS",
            "PRODUCT_PURCHASE_VERIFICATION_FAILED",
            "TENANT_PRINCIPAL_APP_CREATED",
            "TENANT_PRINCIPAL_APP_IN_PROGRESS",
            "TENANT_PRINCIPAL_APP_FAILED",
            "TENANT_PRINCIPAL_CREATED",
            "TENANT_PRINCIPAL_IN_PROGRESS",
            "TENANT_PRINCIPAL_FAILED",
            "TENANT_PRINCIPAL_CREDENTIAL_CREATED",
            "TENANT_PRINCIPAL_CREDENTIAL_IN_PROGRESS",
            "TENANT_PRINCIPAL_CREDENTIAL_FAILED",
            "ADMIN_ROLE_DEFINITION_CREATED",
            "ADMIN_ROLE_DEFINITION_IN_PROGRESS",
            "ADMIN_ROLE_DEFINITION_FAILED",
            "PRINCIPAL_ADMIN_ROLE_CREATED",
            "PRINCIPAL_ADMIN_ROLE_IN_PROGRESS",
            "PRINCIPAL_ADMIN_ROLE_FAILED",
            "PRINCIPAL_APP_GRAPH_API_PERMISSIONS_CREATED",
            "PRINCIPAL_APP_GRAPH_API_PERMISSIONS_IN_PROGRESS",
            "PRINCIPAL_APP_GRAPH_API_PERMISSIONS_FAILED",
            "INITIAL_MGMT_GROUP_CREATED",
            "INITIAL_MGMT_GROUP_IN_PROGRESS",
            "INITIAL_MGMT_GROUP_FAILED",
            "INITIAL_MGMT_GROUP_VERIFICATION_CREATED",
            "INITIAL_MGMT_GROUP_VERIFICATION_IN_PROGRESS",
            "INITIAL_MGMT_GROUP_VERIFICATION_FAILED",
            "TENANT_ADMIN_OWNERSHIP_CREATED",
            "TENANT_ADMIN_OWNERSHIP_IN_PROGRESS",
            "TENANT_ADMIN_OWNERSHIP_FAILED",
            "TENANT_ADMIN_CREDENTIAL_RESET_CREATED",
            "TENANT_ADMIN_CREDENTIAL_RESET_IN_PROGRESS",
            "TENANT_ADMIN_CREDENTIAL_RESET_FAILED",
            "TENANT_PRINCIPAL_OWNERSHIP_CREATED",
            "TENANT_PRINCIPAL_OWNERSHIP_IN_PROGRESS",
            "TENANT_PRINCIPAL_OWNERSHIP_FAILED",
            "BILLING_OWNER_CREATED",
            "BILLING_OWNER_IN_PROGRESS",
            "BILLING_OWNER_FAILED",
            "POLICIES_CREATED",
            "POLICIES_IN_PROGRESS",
            "POLICIES_FAILED",
            name="fsmstates",
            native_enum=False,
        ),
        existing_type=sa.Enum(
            "UNSTARTED",
            "COMPLETED",
            "CONFIGURATION_ERROR",
            "TENANT_CREATED",
            "TENANT_IN_PROGRESS",
            "TENANT_FAILED",
            "BILLING_PROFILE_CREATION_CREATED",
            "BILLING_PROFILE_CREATION_IN_PROGRESS",
            "BILLING_PROFILE_CREATION_FAILED",
            "BILLING_PROFILE_VERIFICATION_CREATED",
            "BILLING_PROFILE_VERIFICATION_IN_PROGRESS",
            "BILLING_PROFILE_VERIFICATION_FAILED",
            "BILLING_PROFILE_TENANT_ACCESS_CREATED",
            "BILLING_PROFILE_TENANT_ACCESS_IN_PROGRESS",
            "BILLING_PROFILE_TENANT_ACCESS_FAILED",
            "TASK_ORDER_BILLING_CREATION_CREATED",
            "TASK_ORDER_BILLING_CREATION_IN_PROGRESS",
            "TASK_ORDER_BILLING_CREATION_FAILED",
            "TASK_ORDER_BILLING_VERIFICATION_CREATED",
            "TASK_ORDER_BILLING_VERIFICATION_IN_PROGRESS",
            "TASK_ORDER_BILLING_VERIFICATION_FAILED",
            "BILLING_INSTRUCTION_CREATED",
            "BILLING_INSTRUCTION_IN_PROGRESS",
            "BILLING_INSTRUCTION_FAILED",
            "PRODUCT_PURCHASE_CREATED",
            "PRODUCT_PURCHASE_IN_PROGRESS",
            "PRODUCT_PURCHASE_FAILED",
            "PRODUCT_PURCHASE_VERIFICATION_CREATED",
            "PRODUCT_PURCHASE_VERIFICATION_IN_PROGRESS",
            "PRODUCT_PURCHASE_VERIFICATION_FAILED",
            "TENANT_PRINCIPAL_APP_CREATED",
            "TENANT_PRINCIPAL_APP_IN_PROGRESS",
            "TENANT_PRINCIPAL_APP_FAILED",
            "TENANT_PRINCIPAL_CREATED",
            "TENANT_PRINCIPAL_IN_PROGRESS",
            "TENANT_PRINCIPAL_FAILED",
            "TENANT_PRINCIPAL_CREDENTIAL_CREATED",
            "TENANT_PRINCIPAL_CREDENTIAL_IN_PROGRESS",
            "TENANT_PRINCIPAL_CREDENTIAL_FAILED",
            "ADMIN_ROLE_DEFINITION_CREATED",
            "ADMIN_ROLE_DEFINITION_IN_PROGRESS",
            "ADMIN_ROLE_DEFINITION_FAILED",
            "PRINCIPAL_ADMIN_ROLE_CREATED",
            "PRINCIPAL_ADMIN_ROLE_IN_PROGRESS",
            "PRINCIPAL_ADMIN_ROLE_FAILED",
            "INITIAL_MGMT_GROUP_CREATED",
            "INITIAL_MGMT_GROUP_IN_PROGRESS",
            "INITIAL_MGMT_GROUP_FAILED",
            "INITIAL_MGMT_GROUP_VERIFICATION_CREATED",
            "INITIAL_MGMT_GROUP_VERIFICATION_IN_PROGRESS",
            "INITIAL_MGMT_GROUP_VERIFICATION_FAILED",
            "TENANT_ADMIN_OWNERSHIP_CREATED",
            "TENANT_ADMIN_OWNERSHIP_IN_PROGRESS",
            "TENANT_ADMIN_OWNERSHIP_FAILED",
            "TENANT_ADMIN_CREDENTIAL_RESET_CREATED",
            "TENANT_ADMIN_CREDENTIAL_RESET_IN_PROGRESS",
            "TENANT_ADMIN_CREDENTIAL_RESET_FAILED",
            "TENANT_PRINCIPAL_OWNERSHIP_CREATED",
            "TENANT_PRINCIPAL_OWNERSHIP_IN_PROGRESS",
            "TENANT_PRINCIPAL_OWNERSHIP_FAILED",
            "BILLING_OWNER_CREATED",
            "BILLING_OWNER_IN_PROGRESS",
            "BILLING_OWNER_FAILED",
            "POLICIES_CREATED",
            "POLICIES_IN_PROGRESS",
            "POLICIES_FAILED",
            name="fsmstates",
            native_enum=False,
        ),
        existing_nullable=False,
    )


def downgrade():
    op.alter_column(
        "portfolio_state_machines",
        "state",
        sa.Enum(
            "UNSTARTED",
            "COMPLETED",
            "CONFIGURATION_ERROR",
            "TENANT_CREATED",
            "TENANT_IN_PROGRESS",
            "TENANT_FAILED",
            "BILLING_PROFILE_CREATION_CREATED",
            "BILLING_PROFILE_CREATION_IN_PROGRESS",
            "BILLING_PROFILE_CREATION_FAILED",
            "BILLING_PROFILE_VERIFICATION_CREATED",
            "BILLING_PROFILE_VERIFICATION_IN_PROGRESS",
            "BILLING_PROFILE_VERIFICATION_FAILED",
            "BILLING_PROFILE_TENANT_ACCESS_CREATED",
            "BILLING_PROFILE_TENANT_ACCESS_IN_PROGRESS",
            "BILLING_PROFILE_TENANT_ACCESS_FAILED",
            "TASK_ORDER_BILLING_CREATION_CREATED",
            "TASK_ORDER_BILLING_CREATION_IN_PROGRESS",
            "TASK_ORDER_BILLING_CREATION_FAILED",
            "TASK_ORDER_BILLING_VERIFICATION_CREATED",
            "TASK_ORDER_BILLING_VERIFICATION_IN_PROGRESS",
            "TASK_ORDER_BILLING_VERIFICATION_FAILED",
            "BILLING_INSTRUCTION_CREATED",
            "BILLING_INSTRUCTION_IN_PROGRESS",
            "BILLING_INSTRUCTION_FAILED",
            "PRODUCT_PURCHASE_CREATED",
            "PRODUCT_PURCHASE_IN_PROGRESS",
            "PRODUCT_PURCHASE_FAILED",
            "PRODUCT_PURCHASE_VERIFICATION_CREATED",
            "PRODUCT_PURCHASE_VERIFICATION_IN_PROGRESS",
            "PRODUCT_PURCHASE_VERIFICATION_FAILED",
            "TENANT_PRINCIPAL_APP_CREATED",
            "TENANT_PRINCIPAL_APP_IN_PROGRESS",
            "TENANT_PRINCIPAL_APP_FAILED",
            "TENANT_PRINCIPAL_CREATED",
            "TENANT_PRINCIPAL_IN_PROGRESS",
            "TENANT_PRINCIPAL_FAILED",
            "TENANT_PRINCIPAL_CREDENTIAL_CREATED",
            "TENANT_PRINCIPAL_CREDENTIAL_IN_PROGRESS",
            "TENANT_PRINCIPAL_CREDENTIAL_FAILED",
            "ADMIN_ROLE_DEFINITION_CREATED",
            "ADMIN_ROLE_DEFINITION_IN_PROGRESS",
            "ADMIN_ROLE_DEFINITION_FAILED",
            "PRINCIPAL_ADMIN_ROLE_CREATED",
            "PRINCIPAL_ADMIN_ROLE_IN_PROGRESS",
            "PRINCIPAL_ADMIN_ROLE_FAILED",
            "INITIAL_MGMT_GROUP_CREATED",
            "INITIAL_MGMT_GROUP_IN_PROGRESS",
            "INITIAL_MGMT_GROUP_FAILED",
            "INITIAL_MGMT_GROUP_VERIFICATION_CREATED",
            "INITIAL_MGMT_GROUP_VERIFICATION_IN_PROGRESS",
            "INITIAL_MGMT_GROUP_VERIFICATION_FAILED",
            "TENANT_ADMIN_OWNERSHIP_CREATED",
            "TENANT_ADMIN_OWNERSHIP_IN_PROGRESS",
            "TENANT_ADMIN_OWNERSHIP_FAILED",
            "TENANT_ADMIN_CREDENTIAL_RESET_CREATED",
            "TENANT_ADMIN_CREDENTIAL_RESET_IN_PROGRESS",
            "TENANT_ADMIN_CREDENTIAL_RESET_FAILED",
            "TENANT_PRINCIPAL_OWNERSHIP_CREATED",
            "TENANT_PRINCIPAL_OWNERSHIP_IN_PROGRESS",
            "TENANT_PRINCIPAL_OWNERSHIP_FAILED",
            "BILLING_OWNER_CREATED",
            "BILLING_OWNER_IN_PROGRESS",
            "BILLING_OWNER_FAILED",
            "POLICIES_CREATED",
            "POLICIES_IN_PROGRESS",
            "POLICIES_FAILED",
            name="fsmstates",
            native_enum=False,
        ),
        existing_type=sa.Enum(
            "UNSTARTED",
            "COMPLETED",
            "CONFIGURATION_ERROR",
            "TENANT_CREATED",
            "TENANT_IN_PROGRESS",
            "TENANT_FAILED",
            "BILLING_PROFILE_CREATION_CREATED",
            "BILLING_PROFILE_CREATION_IN_PROGRESS",
            "BILLING_PROFILE_CREATION_FAILED",
            "BILLING_PROFILE_VERIFICATION_CREATED",
            "BILLING_PROFILE_VERIFICATION_IN_PROGRESS",
            "BILLING_PROFILE_VERIFICATION_FAILED",
            "BILLING_PROFILE_TENANT_ACCESS_CREATED",
            "BILLING_PROFILE_TENANT_ACCESS_IN_PROGRESS",
            "BILLING_PROFILE_TENANT_ACCESS_FAILED",
            "TASK_ORDER_BILLING_CREATION_CREATED",
            "TASK_ORDER_BILLING_CREATION_IN_PROGRESS",
            "TASK_ORDER_BILLING_CREATION_FAILED",
            "TASK_ORDER_BILLING_VERIFICATION_CREATED",
            "TASK_ORDER_BILLING_VERIFICATION_IN_PROGRESS",
            "TASK_ORDER_BILLING_VERIFICATION_FAILED",
            "BILLING_INSTRUCTION_CREATED",
            "BILLING_INSTRUCTION_IN_PROGRESS",
            "BILLING_INSTRUCTION_FAILED",
            "PRODUCT_PURCHASE_CREATED",
            "PRODUCT_PURCHASE_IN_PROGRESS",
            "PRODUCT_PURCHASE_FAILED",
            "PRODUCT_PURCHASE_VERIFICATION_CREATED",
            "PRODUCT_PURCHASE_VERIFICATION_IN_PROGRESS",
            "PRODUCT_PURCHASE_VERIFICATION_FAILED",
            "TENANT_PRINCIPAL_APP_CREATED",
            "TENANT_PRINCIPAL_APP_IN_PROGRESS",
            "TENANT_PRINCIPAL_APP_FAILED",
            "TENANT_PRINCIPAL_CREATED",
            "TENANT_PRINCIPAL_IN_PROGRESS",
            "TENANT_PRINCIPAL_FAILED",
            "TENANT_PRINCIPAL_CREDENTIAL_CREATED",
            "TENANT_PRINCIPAL_CREDENTIAL_IN_PROGRESS",
            "TENANT_PRINCIPAL_CREDENTIAL_FAILED",
            "ADMIN_ROLE_DEFINITION_CREATED",
            "ADMIN_ROLE_DEFINITION_IN_PROGRESS",
            "ADMIN_ROLE_DEFINITION_FAILED",
            "PRINCIPAL_ADMIN_ROLE_CREATED",
            "PRINCIPAL_ADMIN_ROLE_IN_PROGRESS",
            "PRINCIPAL_ADMIN_ROLE_FAILED",
            "PRINCIPAL_APP_GRAPH_API_PERMISSIONS_CREATED",
            "PRINCIPAL_APP_GRAPH_API_PERMISSIONS_IN_PROGRESS",
            "PRINCIPAL_APP_GRAPH_API_PERMISSIONS_FAILED",
            "INITIAL_MGMT_GROUP_CREATED",
            "INITIAL_MGMT_GROUP_IN_PROGRESS",
            "INITIAL_MGMT_GROUP_FAILED",
            "INITIAL_MGMT_GROUP_VERIFICATION_CREATED",
            "INITIAL_MGMT_GROUP_VERIFICATION_IN_PROGRESS",
            "INITIAL_MGMT_GROUP_VERIFICATION_FAILED",
            "TENANT_ADMIN_OWNERSHIP_CREATED",
            "TENANT_ADMIN_OWNERSHIP_IN_PROGRESS",
            "TENANT_ADMIN_OWNERSHIP_FAILED",
            "TENANT_ADMIN_CREDENTIAL_RESET_CREATED",
            "TENANT_ADMIN_CREDENTIAL_RESET_IN_PROGRESS",
            "TENANT_ADMIN_CREDENTIAL_RESET_FAILED",
            "TENANT_PRINCIPAL_OWNERSHIP_CREATED",
            "TENANT_PRINCIPAL_OWNERSHIP_IN_PROGRESS",
            "TENANT_PRINCIPAL_OWNERSHIP_FAILED",
            "BILLING_OWNER_CREATED",
            "BILLING_OWNER_IN_PROGRESS",
            "BILLING_OWNER_FAILED",
            "POLICIES_CREATED",
            "POLICIES_IN_PROGRESS",
            "POLICIES_FAILED",
            name="fsmstates",
            native_enum=False,
        ),
        existing_nullable=False,
    )
