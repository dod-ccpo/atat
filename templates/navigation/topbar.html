{% from "components/icon.html" import Icon %}

<header class="topbar">
  <nav class="topbar__navigation">
    <a href="{{ url_for('atat.home') }}" class="topbar__link topbar__link--home">
      {{ Icon('shield', classes='topbar__link-icon') }}
      <span class="topbar__link-label">
        {{ "navigation.topbar.jedi_cloud_link_text" | translate }}
      </span>
    </a>
    <div class="topbar__context">
      {% if g.current_user %}
      <a href="{{ url_for('users.user') }}" class="topbar__link">
        {{ Icon('user', classes='topbar__link-icon') }}
        <span class="topbar__link-label">{{ g.current_user.first_name + " " + g.current_user.last_name }}</span>
      </a>
      {% if service_desk_url %}
      <a href="{{ service_desk_url }}" rel="noopener noreferrer" target="_blank" class="topbar__link">
        {{ Icon('question', classes='topbar__link-icon') }}
        <span class="topbar__link-label">Support</span>
      </a>
      {% endif %}

      <a href="{{ url_for('atat.logout') }}" class="topbar__link"
        title='{{ "navigation.topbar.logout_link_title" | translate }}' v-on:click="logout">
        <span class="topbar__link-label">Logout</span>
        {{ Icon('logout', classes='topbar__link-icon') }}
      </a>
      {% else %}
      <a href="{{ url_for('atat.home') }}" class="topbar__link" title='Log in'>
        <span class="topbar__link-label">{{ "base_public.login" | translate }}</span>
        {{ Icon('avatar', classes='topbar__link-icon') }}
      </a>
      {% endif %}
    </div>
  </nav>
</header>