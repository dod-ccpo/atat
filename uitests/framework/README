## BrowserStack README

## UI Test Automation

ATAT uses [BrowserStack](https://www.Browserstack.com/), a testing PaaS
for UI test automation and as a form of integration testing.

These tests do not run locally as part of the regular test suite.

Tests are created using PyTest and Python and then executed from the command line interface through BrowserStack.
We update these tests/steps regularly, and they can be found within the `uitests` directory.

For further information about BrowserStack and its use in ATAT, check out [its README](./uitests/README.md)
in the `uitests` directory.


## Testing philosophy

The tests have been created to traverse the most common user flows in ATAT. There are a few tests (e.g. "New Portfolio - no optional fields")
that check for regressions. Others (e.g. "Remove Portfolio Member") check less-common, "negative path" flows. Tests are added as necessary
to ensure fairly thorough review of ATAT.

## Running BrowserStack tests locally

To run BrowserStack tests against a local instance of ATAT, you will need the following:

- Download [ngrok](https://ngrok.com/)
- NGROK_TOKEN - personal ngrok token.
- BROWSERSTACK_API_KEY - personal BrowserStack token
- On Develop branch:
    - `git pull`
    - `service redis-server start`
    - `service postgresql start`
    - `pyenv shell 3.8.8`
    - `script/secure_server`

NGROK TUNNEL
From the ngrok application you will need to key your ngrok token: `ngrok authtoken xyz`
- Your token is then entered in the ngrok terminal, click enter
- Then enter `ngrok http https://localhost:8000`
- Your ngrok forwarding addresses are listed in the ngrok terminal

SETTING YOUR ENVIRONMENT VARIABLES
- User Variables:
    - Name: baseURL
    - Value: ngrok or localhost
    - Name: loginURL
    - Value: ngrok/endpoint or localhost/endpoint
    - Name: browserStackApi
    - Value: https://username:accesskey@hub-cloud.browserstack.com/wd/hub

IN VISUAL STUDIO CODE
Dependencies needed

    pip install pytest
    pip install selenium
    pip install pytest-xdist

Commands to run the tests on the individual browsers via BrowserStack and locally

    pytest -s -v -n=2 testCases/test_smoke.py --browser edge
    pytest -s -v -n=2 testCases/test_smoke.py --browser ie
    pytest -s -v -n=2 testCases/test_smoke.py --browser chrome
    pytest -s -v -n=2 testCases/test_smoke.py --browser chome-local *for local testing

