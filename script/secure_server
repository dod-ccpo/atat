#!/bin/bash

# script/secure_server: Launch the server with SSL for local testing when https is required

source "$(dirname "${0}")"/../script/include/global_header.inc.sh

export APP_SSL_CERT_PATH=ssl/local.crt
export APP_SSL_KEY_PATH=ssl/local.key

if [ ! -f "$APP_SSL_CERT_PATH" ] || [ ! -f "$APP_SSL_KEY_PATH" ]; then
    echo -e "** NO LOCAL SSL CERT FOUND **"
    echo -e "Please verify that $APP_SSL_CERT_PATH and $APP_SSL_KEY_PATH both exist and are valid."
    echo -e "Certs can be generated by running script/create_local_certs"
    exit 1
fi

# Launch the app
run_command "honcho start"
