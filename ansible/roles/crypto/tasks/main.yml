- name: Create the dh directory if it does not exist
  file:
    path: /src/ansible/dh
    state: directory
    mode: "0755"

- name: (Async) Generate Diffie-Hellman parameters with the default size of 4096 bits
  openssl_dhparam:
    path: /src/ansible/dh/dhparams.pem
  async: 10000
  poll: 0
  register: diffie_hellman_job_handle
